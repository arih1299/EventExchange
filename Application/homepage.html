<!DOCTYPE html>
<!-- THis is the html for the homepage to demo the features accessed by users-->
<html lang="en">

<head>
    <title>Prototype Demo (Homepage)</title>
    <meta name="description" content="Homepage to demo the solace features accessed by users">
    <meta http-equiv="X-UA-Compatible" content="IE=edge;" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Load Solace Web Messaging API for JavaScript -->
    <script src="lib/solclient-debug.js"></script>

    <!-- load js to run the ui for this page-->
    <script src="ui.js"></script>

    <!-- Load js to retrieve the ACL via SEMP API REST call -->
    <script src="AccessListCall.js"></script>

    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <!-- Load CSS-->
    <link rel="stylesheet" type="text/css" href="css/pure.css">
    </link>
    <link rel="stylesheet" type="text/css" href="css/samples.css">
    </link>
    <!-- Load W3.CSS-->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    </link>
    <script>
        window.onload = function () {
            // Retrieve the list of topics that an agency can publish to and is subscribed to
            var published = AccessListCall("LTA","GET"); //["LTA/>", "LTA/1/IMD_DATA"]
            var subscribed = AccessListCall("LTA","GETALL") //["NEA/>", "MHA/1/IMD_DATA"]
            for(var i=0; i < published.length;i++){
                try {
                    // iterates through the published topic list and populates a table
                    var table = document.getElementById('publishTopic');
                    var row = table.insertRow(-1);
                    var cell1 = row.insertCell(0);
                    cell1.innerHTML = published[i];
                } catch (error) {
                    pubsub.log(error.toString());
                }
            }
            for(var x=0; x < subscribed.length;x++){
                try {
                    // iterates through the subscribed topic list and populates a table
                    var table = document.getElementById('avilTopic');
                    var row = table.insertRow(-1);
                    var cell1 = row.insertCell(0);
                    cell1.innerHTML = subscribed[x];
                } catch (error) {
                    pubsub.log(error.toString());
                }
            }
        }
        </script>
</head>

<body>
    <!--Warning for users to enable javascript to run this demo-->
    <noscript>Please enable JavaScript on your browser to continue</noscript>
    <div class="banner">
        <div class="banner-interior">
            <span class="logo">
                <img src="image/solace.png" />
            </span>
            <div class="banner-heading">
                Demo (Iter 1)
            </div>
        </div>
    </div>
    <!--Tab bar to toggle between various tabs refer to the openstuff function in ui.js for the js running this ui-->
    <div class="w3-bar w3-black">
        <button class="w3-bar-item w3-button tablink w3-red" onclick="openStuff(event, 'info')"> How does it
            Work?</button>
        <button class="w3-bar-item w3-button tablink" onclick="openStuff(event, 'Published')">Published
            Topics</button>
        <button class="w3-bar-item w3-button tablink" onclick="openStuff(event, 'AvilTopics')">Topics Available</button>
        <button class="w3-bar-item w3-button tablink" onclick="openStuff(event, 'stat')">Current Message
            Statistics</button>
        <button class="w3-bar-item w3-button tablink" onclick="openStuff(event, 'RegTopic')">Register a topic</button>
        <button class="w3-bar-item w3-button tablink" onclick="openStuff(event, 'mapped')">Analytics and Mapping
            Example</button>
    </div>
    <!-- Tab that showcases all the topics that is being published by the agency-->
    <div id="info" class="w3-container w3-border pubsub">
        <br>
        <div class="w3-white w3-light w3-blue-grey w3-card-4">
            <div class="w3-container w3-card-2 w3-white w3-hover-shadow w3-margin-bottom">
                <br>
                <div class="w3-container w3-card w3-teal w3-center">
                    <h2>Central Data Exchange</h2>
                    <p>Enabling Cross Agency Data Exchange and Collaboration</p>
                </div>
                <br>
                <div class="w3-row-padding">
                    <div class="w3-third">
                        <div class="w3-container w3-card w3-white w3-margin-bottom">
                            <div id="sample">
                                <div id="paper" class="joint-paper joint-theme-default"
                                    style="width: 100%; height: 100% "></div>
                            </div>
                        </div>
                    </div>

                    <div class="w3-twothird">
                        <div class="w3-container w3-card w3-white w3-margin-bottom">
                            <h2 class="w3-text-grey w3-padding-16">What is a Central Broker?</h2>
                            <p> This is explanation of the central broker Lorem ipsum dolor sit amet. Praesentium magnam
                                consectetur vel in deserunt aspernatur est reprehenderit sunt hic. Nulla tempora soluta ea et odio, unde doloremque repellendus
                                iure, iste.</p>
                        </div>
                        <div class="w3-container w3-card w3-white w3-margin-bottom">
                                <h2 class="w3-text-grey w3-padding-16">How does the Analytics Work?</h2>
                                <p> This is explanation of the Analytics Lorem ipsum dolor sit amet. Praesentium magnam
                                    consectetur vel in deserunt aspernatur est reprehenderit sunt hic. Nulla tempora soluta ea et odio, unde doloremque repellendus
                                    iure, iste.</p>
                            </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- Tab that showcases all the topics that is being published by the agency-->
    <div id="Published" class="w3-container w3-border pubsub" style="display:none">
        <br><br>
        <!-- Table value can be changed as per the type of topics being published/demonstrated-->
        <table class="w3-table-all w3-hoverable w3-card-4" , id='publishTopic'>
            <tr class='w3-teal'>
                <th>Published Topics</th>
                <!-- <th>Description</th> -->
            </tr>
            <!-- <tr>
                <td>NEA/1/temp_data/raw</td>
                <td>Provides a stream of raw temperature data from various weather sensors in singapore<br>
                    Example Message Content :"id": "S109", "lat": "1.3764", "long": "103.8492", "value": "31.1",
                    "timestamp":
                    "2019-05-29T16:40:00+08:00"
                </td>
            </tr>
            <tr>
                <td>NEA/1/rain_data/raw</td>
                <td>Provides a stream of raw rain data from various weather sensors in singapore<br>
                    Example Message Content :"id": "S109", "lat": "1.3764", "long": "103.8492", "value": "1",
                    "timestamp":
                    "2019-05-29T16:40:00+08:00"
                </td>
            </tr>
            <tr>
                <td>NEA/1/temp_data/change</td>
                <td>Streams a message indicating the location of a temperature change of more than 0.5 degrees celsius
                    based on analysis of raw data<br>
                </td>
            </tr>
            <tr>
                <td>NEA/1/rain_data/start</td>
                <td>Streams a message indicating the location of where rain has started based on analysis of raw data
                </td>
            </tr>
            <tr>
                <td>NEA/1/rain_data/stop</td>
                <td>Streams a message indicating the location of where rain has stopped based on analysis of raw data
                </td>
            </tr> -->
        </table>
        <br>
    </div>

    <!-- Tab that showcases all the topics that is being published by other agencies and avil to be used-->
    <div id="AvilTopics" class="w3-container w3-border pubsub" style="display:none">
        <br><br>
        <!-- Table value can be changed as per the type of topics being published/demonstrated-->
        <table class="w3-table-all w3-hoverable w3-card-4" , id='avilTopic'>
            <tr class='w3-teal'>
                <th>Available Topics</th>
                <!-- <th>Description</th> -->
            </tr>
            <!-- <tr>
                <td>LTA/1/img_data/raw</td>
                <td>Provides a stream of raw images of expressways in singapore<br>
                </td>
            </tr>
            <tr>
                <td>LTA/1/taxi_data/raw</td>
                <td>Provides a stream of raw location data on the available taxis in singapre<br>
                </td>
            </tr> -->
        </table>
        <br>
    </div>
    <!-- Tab that showcases the dataflow of all the messages being published-->
    <div id="stat" class="w3-container w3-border pubsub" style="display:none">
        <div class="resp-container">
            <!--Utilise iframe to render dataflow.html into this tab -->
            <iframe class="resp-iframe" src="dataflow.html" height="500" width="100%"></iframe>
        </div>
    </div>
    <!-- Tab that agencies can use to register new topics into the centralised broker-->
    <div id="RegTopic" class="w3-container w3-border pubsub" style="display:none">
        <div class="resp-container">
        <!--Utilise iframe to render registertopi.html into this tab -->
        <iframe class="resp-iframe" src="registertopic.html"></iframe>
        </div>
    </div>
    <!-- Tab that showcases the realtime figure from topics being analysed and geospatialy mapped-->
    <div id="mapped" class="w3-container w3-border pubsub" style="display:none">
        <div class="resp-container">
            <!--Utilise iframe to render map.html into this tab -->
            <iframe class="resp-iframe" src="map.html"></iframe>
        </div>
    </div>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/2.1.0/joint.js"></script>
<script type="text/javascript" src="test.js"></script>

</html>