<!DOCTYPE html>

<html lang="en">

  <head>
    <title>Prototype Demo</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge;" />
    <meta charset="utf-8"/>

    <link rel="stylesheet" type="text/css" href="css/pure.css"></link>
    <link rel="stylesheet" type="text/css" href="css/samples.css"></link>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jointjs/2.1.0/joint.css" />

    <!-- Load Solace Web Messaging API for JavaScript -->
    <script src="lib/solclient-debug.js"></script>

    <!-- Load the Confirmed Delivery tutorial -->
    <script src="Centralpubsub.js"></script>
    <script src="config/config.js" type="text/javascript"></script>
    <script src="https://requirejs.org/docs/release/2.3.6/minified/require.js"></script>

    <!-- Execute the Confirmed Delivery tutorial -->
    <script>
      var producer = null;
      window.onload = function () {
        // Initialize factory with the most recent API defaults
        var factoryProps = new solace.SolclientFactoryProperties();
        factoryProps.profile = solace.SolclientFactoryProfiles.version10;
        solace.SolclientFactory.init(factoryProps);

        // enable logging to JavaScript console at WARN level
        // NOTICE: works only with "solclientjs-debug.js"
        solace.SolclientFactory.setLogLevel(solace.LogLevel.WARN);

        central = new PubSub({queueName : 'SOLACE_ALL', logname : 'subscribelog', tableName : 'table2'});
        document.getElementById("subconnect").addEventListener("click", central.connect);
        document.getElementById("subdisconnect").addEventListener("click", central.disconnect);
        document.getElementById("startconsume").addEventListener("click", central.startConsume);
        document.getElementById("stopconsume").addEventListener("click", central.stopConsume);
      };
    </script>
  </head>

  <body>

    <div class="banner">
      <div class="banner-interior">
        <span class="logo">
          <img src="image/solace.png"/>
        </span>
        <div class="banner-heading">
          CentralisedBroker
        </div>
      </div>
    </div>
    <div class="container">
    <div class="doc-body wrap">
      <h2>Message flow in a Smart City using Solace</h2>
      <form class="pure-form pure-form-aligned">
        <div class="grid-container">
          <div class="grid-item">
              <div class="pure-control-group">
                <br><br><br>
                </div>
            <p align="center">
              <button type="button" class="pure-button pure-button-primary" id="subconnect">Connect</button>
              <button type="button" class="pure-button button-error" id="subdisconnect">Disconnect</button>
            </p>
            <p align="center">
              <button type="button" class="pure-button pure-button-primary" id="startconsume">Consume messages </button>
              <button type="button" class="pure-button button-error" id="stopconsume">Stop consuming</button>
            </p>
          </div>
            <div class="grid-item input" align="left">
                <p>
                  <div class="subscribelog" id="subscribelog" contentEditable="true"></div>
                </p>
            </div>
        </div>
        <br><br>
        <div class="grid-container">
              <table border="1", width="400px" id='table2'>
                  <tr>
                    <th>Image</th>
                  </tr>
              </table>
              <table border="1", width="400px", id='table1'>
                  <tr>
                    <th>Message</th>
                  </tr>
              <table>
              <table border="1", width="400px", id='table3'>
                  <tr>
                    <th>Sensors</th>
                  </tr>
              <table>
        </div>

      </form>
    </div>
  </body>

</html>
