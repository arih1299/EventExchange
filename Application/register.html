<!DOCTYPE html>

<html lang="en">

<head>
    <title>Prototype Demo - Register</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge;" />
    <meta charset="utf-8" />
    <script src="lib/solclient-debug.js"></script>
    <script src="processregister.js"></script>
    <script src="config/config.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="css/pure.css">
    </link>
    <link rel="stylesheet" type="text/css" href="css/samples.css">
    </link>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jointjs/2.1.0/joint.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
    var publisher = null;
		window.onload = function () {
		  // Initialize factory with the most recent API defaults
		  var factoryProps = new solace.SolclientFactoryProperties();
		  factoryProps.profile = solace.SolclientFactoryProfiles.version10;
		  solace.SolclientFactory.init(factoryProps);
  
		  // enable logging to JavaScript console at WARN level
		  // NOTICE: works only with "solclientjs-debug.js"
		  solace.SolclientFactory.setLogLevel(solace.LogLevel.WARN);
  
		  // create the publisher, specifying name of the subscription topic
		  publisher = new RegPublisher('SOLACE_REGISTER');
        $("#submit").click(function() {
            console.debug("Caught send button event");
            var a = document.forms["register"]["aname"].value
            var u = document.forms["register"]["uname"].value
            var p = document.forms["register"]["pwd"].value
            if (a ===""|| u ==="" ||p==="") {
              swal({title: "Missing Inputs! ", text: "Please input all fields!", icon: "error"
              })
            }else{
                publisher.publish()
                publisher.disconnect()
                swal({title: "Thanks for registering! ", text: "Your registration will be confirmed in 3 working days", icon: "success"
                })
                .then((value) => window.location.replace("login.html"))};
          });
    };
  </script>
</head>

<body>
        <div class="banner">
            <div class="banner-interior">
                <span class="logo">
                    <img src="image/solace.png" />
                </span>
                <div class="banner-heading">
                    Demo (Iter 1) - Registration
                </div>
            </div>
        </div>
        <div class="w3-container w3-teal">
        <p><strong>To register to make use of the Central Broker Service, please provide your solace cloud credentials (Username and Password), used to log in to the Solace Cloud Console</strong></p>
        </div>
        <form name="register" class="w3-panel was-validated">
            <div class="form-group">
                <label class="w3-text-teal" for="aname">Agency Name:</label>
                <input type="text" class="form-control w3-input w3-border w3-light-grey w3-hover-shadow"" id="aname" placeholder="Enter Agency Name" name="aname" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Please fill out this field.</div>
            </div>
            <div class="form-group">
              <label class="w3-text-teal" for="uname">Username:</label>
              <input type="text" class="form-control w3-input w3-border w3-light-grey w3-hover-shadow"" id="uname" placeholder="Enter Solace Cloud Username" name="uname" required>
              <div class="valid-feedback">Valid.</div>
              <div class="invalid-feedback">Please fill out this field.</div>
            </div>
            <div class="form-group">
              <label class="w3-text-teal" for="pwd">Password:</label>
              <input type="password" class="form-control w3-input w3-border w3-light-grey w3-hover-shadow"" id="pwd" placeholder="Enter Solace Cloud Password" name="pswd" required>
              <div class="valid-feedback">Valid.</div>
              <div class="invalid-feedback">Please fill out this field.</div>
            </div>
            <div class="form-group form-check">
              <label class="form-check-label">
                <input class="form-check-input" type="checkbox" name="remember" required> I agree to authorize connection of my broker to a central broker.
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Check this checkbox to continue.</div>
              </label>
            </div>
            <button type="button" class="btn btn-primary" id='submit'>Submit</button>
          </form>
</body>

