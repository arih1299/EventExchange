<!DOCTYPE html>

<html lang="en">

<head>
    <title>Prototype Demo - Register</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge;" />
    <meta charset="utf-8" />
    <script src="lib/solclient-debug.js"></script>
    <script src="processtopicreg.js"></script>
    <script src="config/config.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="css/pure.css">
    </link>
    <link rel="stylesheet" type="text/css" href="css/samples.css">
    </link>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jointjs/2.1.0/joint.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
    var publisher = null;
		window.onload = function () {
		  // Initialize factory with the most recent API defaults
		  var factoryProps = new solace.SolclientFactoryProperties();
		  factoryProps.profile = solace.SolclientFactoryProfiles.version10;
		  solace.SolclientFactory.init(factoryProps);
  
		  // enable logging to JavaScript console at WARN level
		  // NOTICE: works only with "solclientjs-debug.js"
		  solace.SolclientFactory.setLogLevel(solace.LogLevel.WARN);
  
		  // create the publisher, specifying name of the subscription topic
		  publisher = new RegPublisher('SOLACE_TOPICREG');
        $("#submit").click(function() {
            console.debug("Caught send button event");
            publisher.publish()
            publisher.disconnect()
            alert("Registered successfully");
            document.getElementById("topicreg").reset();
        });
    };
  </script>
</head>

<body>
        <form  id='topicreg' class="w3-panel was-validated">
            <div class="form-group">
                <label class="w3-text-teal" for="aname">Agency Name:</label>
                <input type="text" class="form-control w3-input w3-border w3-light-grey w3-hover-shadow"" id="aname" placeholder="Enter the publishing Agency Name" name="aname" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Please fill out this field.</div>
            </div>
            <div class="form-group">
                <label class="w3-text-teal" for="topic">Topic:</label>
                <input type="text" class="form-control w3-input w3-border w3-light-grey w3-hover-shadow"" id="topic" placeholder="Enter Topic to be Published" name="topic" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Please fill out this field.</div>
            </div>
            <div class="form-group">
              <label class="w3-text-teal" for="desc">Description:</label>
              <input type="text" class="form-control w3-input w3-border w3-light-grey w3-hover-shadow"" id="desc" placeholder="Give a brief description about the topic" name="desc" required>
              <div class="valid-feedback">Valid.</div>
              <div class="invalid-feedback">Please fill out this field.</div>
            </div>
            <button type="button" class="btn btn-primary" id='submit'>Submit</button>
          </form>
</body>

